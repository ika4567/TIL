#### Progate Ruby on Rails I ~ IV
(2022.5.26)

## ビューについて
- **erb** (Embedded Ruby（埋め込みRuby）)形式のファイルでは、<%%>で囲むことでHTMLファイルの中にRubyのコードを記述することができる。
- ブラウザに表示されない<%%>は変数の定義などに使う。

## モデルについて
- 「rails g model モデル名」 コマンドで作成。モデル名は単数形で頭文字は大文字。
- ApplicationRecordクラスを継承したクラスをモデルと呼ぶ。（作成したモデルが定義されたファイルに記述あり。）

## データベース
- マイグレーションファイルは、データベースに変更を指示するためのファイル。
- 「rails g model モデル名 カラム名:データ型」で作成後、rails db:migrate を実行する。  
追加や削除には別のコマンドを利用。

## 投稿機能
- newメソッドでモデルのインスタンスを作成→saveメソッドでテーブルに保存
- rails consoleを使って作成すると  
post = Post.new(content: “○○”)  
post.save

## createアクション
- フォームの投稿ボタンを押すことで、受け取った投稿データをデータベースに保存する。
- 対応するビューはないのでredirect_toメソッドを使う。

## find_byメソッド
- モデル名.find_by(カラム名: 値)
- ある条件に合致するデータを取得できるメソッド。

## ルーティングについて
- ルーティングは合致するURLを上から順に探す。
- 「/:id」のルーティングは「/index」よりも下に書かなければならない。

## 変数params
- 使い方は２つ。どちらもparams[:○○]で取得できる。  
　1.「:○○」を使った**ルーティングのURLから値を取得**. 。  
　2.「name = “○○”」が付いた**フォームの入力内容を受け取る** 。
- コントローラのアクション内ではルーティングで設定したURLの「:id」の値を取得でき、その値は**paramsにハッシュとして入っている** 。
- showアクションでは、「@変数 = モデル名.find_by(id: params[:id])」のように**idカラムの値がparams[:id]と等しい投稿をデータベースから取得して変数に代入** することで、各URLに対応したデータが表示されるようになる。

## 投稿内容の保存
- textareaタグにname属性を指定することで、name属性の値をキーとしたハッシュがRails側のcreateアクションに送られる。
- name属性を指定したフォームに入力されたデータはコントローラのアクション内で受け取ることが可能になり、変数paramsで受け取る。  
この際のparamsは**name属性に設定した文字列をキーとしたハッシュ** になっている。

## destroyアクション
- データベースから削除したい投稿を取得→destroyメソッドで投稿を削除
- rails cで行うと、  
post = Post.find_by(id: 2)  
post.destroy

## editアクション
- データベースから編集したい投稿を取得→値を上書き→データベースに保存
- rails cで行うと、  
post = Post.find_by(id: 2)  
post.content(“●”)
post.save


## updateアクション
- URLに含まれたidを用いてデータベースから投稿データを取得→フォームから編集内容を受け取り、投稿データを更新
